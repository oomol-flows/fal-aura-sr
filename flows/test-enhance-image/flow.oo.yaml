title: "Test Image Enhancement"
nodes:
  - node_id: upload-to-cloud#1
    title: "Upload file to cloud #1"
    inputs_from:
      - handle: file
        value: /oomol-driver/oomol-storage/ooimage.jpg
    task: upload-to-cloud::upload-to-cloud

  - node_id: enhance#1
    task: self::enhance-image-clarity
    inputs_from:
      - handle: image_url
        from_node:
          - node_id: upload-to-cloud#1
            output_handle: remote_url
  - node_id: query-conversion-result#1
    title: "Query Conversion Result #1"
    inputs_from:
      - handle: task_id
        from_node:
          - node_id: enhance#1
            output_handle: session_id
      - handle: enable_polling
        value: true
      - handle: max_attempts
        value: 60
      - handle: interval_seconds
        value: 5
    task: self::query-conversion-result
  - node_id: image_preview#1
    title: "图片预览 #1"
    inputs_from:
      - handle: image_path
        from_node:
          - node_id: query-conversion-result#1
            output_handle: image_url
    task: oomol-preview::image_preview
